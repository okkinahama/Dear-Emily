<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="Z7oeRWlGR5pHAdAnMnSGpV6a00v7iDyDe9WCVB2ALh0" />
    <title>Dear Emily</title>

    <link rel="stylesheet" href="css/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    </head>

<body>
    <div class="container">
        <div class="scrollable-menu" id="sideMenu">
            <div class="scrollable-content">
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="archive.html">Archive</a></li>
                    <li><a href="articles.html">Article-List</a></li>
                    <li class="about-emily-links"><a href="about-emily.html">About</a></li> <li><a href="contact.html">Contact US</a></li>
                </ul>
            </div>
        </div>

        <div class="main-content">
            <header>
                <div class="hamburger-container">
                    <div class="hamburger-menu" id="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>

                <nav class="main-nav">
                    <ul>
                        <li><a href="index.html">HOME</a></li>
                        <li><a href="archive.html">Archive</a></li>
                        <li><a href="articles.html">Article List</a></li>
                        <li class="about-emily-links"><a href="about-emily.html">About</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </nav>

                <div class="header-content">
                    <h1><a href="index.html">Dear Emily</a></h1>
                    <p class="site-description">å®‡å®™ã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸãƒ–ãƒ­ã‚°</p>
                </div>
            </header>

            <section id="apod-hero" class="section">
                <div id="apod-container-hero">
                    <h2 id="apod-title-hero">Loading Astronomy Picture of the Day...</h2>
                    <div id="apod-media-container-hero">
                        <p>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                    </div>
                    <p id="apod-explanation-hero"></p>
                    <p id="apod-copyright-hero"></p>
                </div>
            </section>

            <section class="hero section">
                <div class="hero-image"></div>
                <div class="hero-text">
                    <h2>Exploring the Mysteries of the Vast Universe</h2>
                    <p>æœ€æ–°ã®å®‡å®™ã«é–¢ã™ã‚‹ã‚ã‚‰ã‚†ã‚‹æƒ…å ±ã‚’ç™ºä¿¡ã—ã¦ã„ã¾ã™ã€‚</p>

                    <div class="space-news-section">
                        <h3>ğŸŒŒ Breaking News from the Cosmosï¼ˆNASAã‚ˆã‚Šï¼‰</h3>
                        <div id="space-news">
                            <p>NASAãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                        </div>
                    </div>
                </div>
            </section>

            <div class="parallax-space"></div>

            <section id="latest-posts" class="section">
                <h2>æœ€æ–°è¨˜äº‹</h2>
                <p>æœ€æ–°è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
            </section>

            <aside id="sidebar-categories" class="section">
                <h2>ã‚«ãƒ†ã‚´ãƒª</h2>
                <p>ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
            </aside>

            <section class="section">
                <h2>å…¨ã¦ã®è¨˜äº‹</h2>
                <div class="filters">
                    <label for="category-filter">ã‚«ãƒ†ã‚´ãƒª:</label>
                    <select id="category-filter">
                        <option value="all">ã™ã¹ã¦</option>
                    </select>

                    <label for="tag-filter">ã‚¿ã‚°:</label>
                    <select id="tag-filter">
                        <option value="all">ã™ã¹ã¦</option>
                    </select>
                </div>

                <div id="all-posts">
                    <p>è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
            </section>

            <section id="main-content-area" class="section">
                <h2>About Emily (ã‚³ãƒ³ãƒ†ãƒ³ãƒ„èª­ã¿è¾¼ã¿ä¸­)</h2>
                <p>about-emily.html ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
            </section>

            <section class="space-weather-container section">
                <div class="space-weather-item">
                    <h2>ä»Šæ—¥ã®å¤ªé™½ãƒ•ãƒ¬ã‚¢æƒ…å ±</h2>
                    <div id="solar-flare-container">
                        <p>å¤ªé™½ãƒ•ãƒ¬ã‚¢æƒ…å ±ã‚’å–å¾—ä¸­ã§ã™...</p>
                    </div>
                </div>
                <div class="space-weather-item">
                    <h2>ä»Šæ—¥ã®åœ°ç£æ°—åµæƒ…å ±</h2>
                    <div id="geomagnetic-storm-container">
                        <p>åœ°ç£æ°—åµæƒ…å ±ã‚’å–å¾—ä¸­ã§ã™...</p>
                    </div>
                </div>
            </section>

            <footer>
                <div class="container">
                    <p>&copy; 2025 Dear Emily</p>
                    <nav>
                        <ul>
                            <li><a href="privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></li>
                            <li><a href="telms.html">åˆ©ç”¨è¦ç´„</a></li>
                            <li><a href="sitemap.html">ã‚µã‚¤ãƒˆãƒãƒƒãƒ—</a></li>
                        </ul>
                    </nav>
                </div>
            </footer>
        </div> </div> <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å‡¦ç† ---
            const hamburgerMenu = document.querySelector('.hamburger-menu');
            const scrollableMenu = document.querySelector('.scrollable-menu');

            if (hamburgerMenu && scrollableMenu) {
                hamburgerMenu.addEventListener('click', function() {
                    scrollableMenu.classList.toggle('open');
                    hamburgerMenu.classList.toggle('open');
                });
            }

            // --- å„ç¨®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å‡¦ç† ---
            // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³
            const fadeIns = document.querySelectorAll('.fade-in');
            const fadeInObserver = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        fadeInObserver.unobserve(entry.target);
                    }
                });
            });
            fadeIns.forEach(fadeIn => {
                fadeInObserver.observe(fadeIn);
            });

            // ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ï¼ˆå·¦ã‹ã‚‰ï¼‰
            const slideInsLeft = document.querySelectorAll('.slide-in-left');
            const slideInLeftObserver = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        slideInLeftObserver.unobserve(entry.target);
                    }
                });
            });
            slideInsLeft.forEach(slideIn => {
                slideInLeftObserver.observe(slideIn);
            });

            // ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ï¼ˆå³ã‹ã‚‰ï¼‰
            const slideInsRight = document.querySelectorAll('.slide-in-right');
            const slideInRightObserver = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        slideInRightObserver.unobserve(entry.target);
                    }
                });
            });
            slideInsRight.forEach(slideIn => {
                slideInRightObserver.observe(slideIn);
            });

            // ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ï¼ˆä¸‹ã‹ã‚‰ï¼‰
            const slideInsBottom = document.querySelectorAll('.slide-in-bottom');
            const slideInBottomObserver = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        slideInBottomObserver.unobserve(entry.target);
                    }
                });
            });
            slideInsBottom.forEach(slideIn => {
                slideInBottomObserver.observe(slideIn);
            });

            // --- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®å‡¦ç† ---
            const scrollProgress = document.getElementById('scroll-progress');
            if (scrollProgress) {
                window.addEventListener('scroll', function() {
                    const scrollTop = window.scrollY;
                    const documentHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    const scrollPercentage = (scrollTop / documentHeight) * 100;
                    scrollProgress.style.width = scrollPercentage + '%';
                });
            }

            // --- NASA APIã‚­ãƒ¼ã®å®šç¾© (å…±é€šåŒ–) ---
            const nasaApiKey = '2xltSsPMjbXB66oDPVCdT6qPhKURghrTPdbhKEzj';
            const today = new Date().toISOString().slice(0, 10);

            // --- APOD (Astronomy Picture of the Day) ã®å–å¾—ã¨è¡¨ç¤º ---
            const apodTitle = document.getElementById('apod-title-hero');
            const apodMediaContainer = document.getElementById('apod-media-container-hero');
            const apodExplanation = document.getElementById('apod-explanation-hero');
            const apodCopyright = document.getElementById('apod-copyright-hero');
            const apodContainer = document.getElementById('apod-container-hero'); // ã‚¨ãƒ©ãƒ¼æ™‚ç”¨
            const apodUrl = `https://api.nasa.gov/planetary/apod?api_key=${nasaApiKey}`;

            fetch(apodUrl)
                .then(res => {
                    if (!res.ok) {
                        return Promise.reject(res.status);
                    }
                    return res.json();
                })
                .then(data => {
                    if (apodTitle) apodTitle.textContent = data.title;
                    if (apodExplanation) apodExplanation.textContent = data.explanation;
                    if (apodCopyright) {
                        apodCopyright.textContent = data.copyright ? `Â© ${data.copyright}` : 'å‡ºå…¸: NASA / ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å¯èƒ½æ€§';
                    }

                    if (apodMediaContainer) {
                        apodMediaContainer.innerHTML = ''; // æ—¢å­˜ã®å†…å®¹ã‚’ã‚¯ãƒªã‚¢
                        if (data.media_type === 'video') {
                            const iframe = document.createElement('iframe');
                            iframe.src = data.url;
                            iframe.width = '100%';
                            iframe.style.aspectRatio = '16 / 9'; // ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã‚’å›ºå®š
                            iframe.frameBorder = '0';
                            iframe.allowFullscreen = true;
                            apodMediaContainer.appendChild(iframe);
                        } else if (data.media_type === 'image') {
                            const img = document.createElement('img');
                            img.src = data.url;
                            img.alt = data.title;
                            img.style.maxWidth = '100%';
                            img.style.height = 'auto';
                            apodMediaContainer.appendChild(img);
                        }
                    }
                })
                .catch(err => {
                    console.error('APODå–å¾—ã‚¨ãƒ©ãƒ¼:', err);
                    if (apodContainer) {
                        apodContainer.innerHTML = '<p>ä»Šæ—¥ã®å®‡å®™ç”»åƒã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</p>';
                    } else if (apodTitle) {
                        apodTitle.textContent = 'ä»Šæ—¥ã®å®‡å®™ç”»åƒã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ';
                    }
                });

            // --- å¤ªé™½ãƒ•ãƒ¬ã‚¢æƒ…å ±ã®å–å¾—ã¨è¡¨ç¤º ---
            const flareContainer = document.getElementById('solar-flare-container');
            const flareUrl = `https://api.nasa.gov/DONKI/FLR?startDate=${today}&endDate=${today}&api_key=${nasaApiKey}`;

            fetch(flareUrl)
                .then(res => {
                    if (!res.ok) {
                        return Promise.reject(res.status);
                    }
                    return res.json();
                })
                .then(data => {
                    if (!flareContainer) return;
                    if (data.length === 0) {
                        flareContainer.innerHTML = '<p>ç¾åœ¨ã®ã¨ã“ã‚ã€å¤ªé™½ãƒ•ãƒ¬ã‚¢ã®æ´»å‹•ã¯è¦³æ¸¬ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
                        return;
                    }
                    flareContainer.innerHTML = '<ul>' + data.map(f => `
                        <li>
                            <div><strong>é–‹å§‹æ—¥æ™‚:</strong> ${f.beginTime}</div>
                            <div><strong>ãƒ”ãƒ¼ã‚¯æ—¥æ™‚:</strong> ${f.peakTime}</div>
                            <div><strong>çµ‚äº†æ—¥æ™‚:</strong> ${f.endTime}</div>
                            <div><strong>å¼·åº¦:</strong> ${f.classType || f.class} ${f.intensity ? f.intensity : ''}</div>
                            <div><strong>é ˜åŸŸ:</strong> ${f.sourceLocation}</div>
                        </li>`).join('') + '</ul>';
                })
                .catch(err => {
                    console.error('å¤ªé™½ãƒ•ãƒ¬ã‚¢å–å¾—ã‚¨ãƒ©ãƒ¼:', err);
                    if (flareContainer) {
                        flareContainer.innerHTML = '<p>å¤ªé™½ãƒ•ãƒ¬ã‚¢æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</p>';
                    }
                });

            // --- åœ°ç£æ°—åµæƒ…å ±ã®å–å¾—ã¨è¡¨ç¤º ---
            const stormContainer = document.getElementById('geomagnetic-storm-container');
            const stormUrl = `https://api.nasa.gov/DONKI/GST?startDate=${today}&endDate=${today}&api_key=${nasaApiKey}`;

            fetch(stormUrl)
                .then(res => {
                    if (!res.ok) {
                        return Promise.reject(res.status);
                    }
                    return res.json();
                })
                .then(data => {
                    if (!stormContainer) return;
                    if (data.length === 0) {
                        stormContainer.innerHTML = '<p>ç¾åœ¨ã®ã¨ã“ã‚ã€åœ°ç£æ°—åµã¯è¦³æ¸¬ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
                        return;
                    }
                    stormContainer.innerHTML = '<ul>' + data.map(s => `
                        <li>
                            <strong>é–‹å§‹æ—¥æ™‚:</strong> ${s.beginTime}<br>
                            <strong>KpæŒ‡æ•°:</strong> ${s.kpIndex}<br>
                            <strong>å¼·åº¦:</strong> ${s.gstID}<br>
                            <strong>ã‚½ãƒ¼ã‚¹:</strong> ${s.source}
                        </li>`).join('') + '</ul>';
                })
                .catch(err => {
                    console.error('åœ°ç£æ°—åµå–å¾—ã‚¨ãƒ©ãƒ¼:', err);
                    if (stormContainer) {
                        stormContainer.innerHTML = '<p>åœ°ç£æ°—åµæƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</p>';
                    }
                });

            // --- NASAãƒ‹ãƒ¥ãƒ¼ã‚¹RSSã®å–å¾— ---
            const rssFeedUrl = 'https://www.nasa.gov/rss/dyn/breaking_news.rss';
            const rssApiUrl = 'https://api.rss2json.com/v1/api.json?rss_url=' + encodeURIComponent(rssFeedUrl);

            fetch(rssApiUrl)
                .then(res => res.json())
                .then(data => {
                    const newsContainer = document.getElementById("space-news");
                    if (newsContainer && data.items) {
                        // æœ€å¤§5ä»¶ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è¡¨ç¤º
                        newsContainer.innerHTML = ''; // ãƒ­ãƒ¼ãƒ‰ä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢
                        data.items.slice(0, 5).forEach(item => {
                            const div = document.createElement("div");
                            div.innerHTML = `<a href="${item.link}" target="_blank">${item.title}</a>`;
                            newsContainer.appendChild(div);
                        });
                    }
                })
                .catch(err => console.error("RSSå–å¾—ã‚¨ãƒ©ãƒ¼:", err));

            // --- è¨˜äº‹é–¢é€£ã®å‡¦ç† (posts.jsonã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã€æœ€æ–°è¨˜äº‹ã€ã‚«ãƒ†ã‚´ãƒªã€ãƒ•ã‚£ãƒ«ã‚¿) ---
            const latestPostsContainer = document.getElementById('latest-posts');
            const sidebarCategoriesContainer = document.getElementById("sidebar-categories");
            const allPostsContainer = document.getElementById('all-posts');
            const categoryFilter = document.getElementById('category-filter');
            const tagFilter = document.getElementById('tag-filter');

            fetch('posts.json') // JSONã®ãƒ‘ã‚¹ã‚’æ­£ã—ã
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(posts => {
                    // æœ€æ–°è¨˜äº‹ã®è¡¨ç¤º
                    if (latestPostsContainer) {
                        latestPostsContainer.innerHTML = ''; // ãƒ­ãƒ¼ãƒ‰ä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢
                        const latestPosts = posts
                            .sort((a, b) => new Date(b.date) - new Date(a.date))
                            .slice(0, 5); // æœ€æ–°5ä»¶ã‚’è¡¨ç¤º

                        latestPosts.forEach(post => {
                            const div = document.createElement('div');
                            div.className = 'post-item';
                            div.innerHTML = `
                                <h3><a href="${post.url || post.link}">${post.title}</a></h3>
                                <p>${post.date} ï½œ ã‚«ãƒ†ã‚´ãƒªï¼š${post.category}</p>
                            `;
                            latestPostsContainer.appendChild(div);
                        });
                    }

                    // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®è¡¨ç¤º (ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’æƒ³å®š)
                    if (sidebarCategoriesContainer) {
                        const categoriesMap = {};
                        posts.forEach(post => {
                            if (!categoriesMap[post.category]) {
                                categoriesMap[post.category] = [];
                            }
                            categoriesMap[post.category].push(post);
                        });

                        // ã‚«ãƒ†ã‚´ãƒªãƒªã‚¹ãƒˆã®HTMLæ§‹é€ ã‚’ç”Ÿæˆ
                        const categoryListHtml = `
                            <h2>ã‚«ãƒ†ã‚´ãƒªãƒ¼</h2>
                            <ul class="category-list">
                                ${Object.keys(categoriesMap).map(cat => `
                                    <li><a href="category.html?name=${encodeURIComponent(cat)}">${cat} (${categoriesMap[cat].length})</a></li>
                                `).join('')}
                            </ul>
                        `;
                        sidebarCategoriesContainer.innerHTML = categoryListHtml;
                    }

                    // å…¨æŠ•ç¨¿è¡¨ç¤º + ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½ (è¨˜äº‹ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’æƒ³å®š)
                    if (allPostsContainer && categoryFilter && tagFilter) {
                        const categories = new Set();
                        const tags = new Set();

                        posts.forEach(post => {
                            categories.add(post.category);
                            if (post.tags) { // post.tagsã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 
                                post.tags.forEach(tag => tags.add(tag));
                            }
                        });

                        // ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¿½åŠ 
                        categoryFilter.innerHTML = '<option value="all">å…¨ã¦ã®ã‚«ãƒ†ã‚´ãƒª</option>';
                        categories.forEach(category => {
                            const option = document.createElement('option');
                            option.value = category;
                            option.textContent = category;
                            categoryFilter.appendChild(option);
                        });

                        // ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¿½åŠ 
                        tagFilter.innerHTML = '<option value="all">å…¨ã¦ã®ã‚¿ã‚°</option>';
                        tags.forEach(tag => {
                            const option = document.createElement('option');
                            option.value = tag;
                            option.textContent = tag;
                            tagFilter.appendChild(option);
                        });

                        function displayPosts(filtered) {
                            allPostsContainer.innerHTML = '';
                            if (filtered.length === 0) {
                                allPostsContainer.innerHTML = '<p>è¡¨ç¤ºã™ã‚‹è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                                return;
                            }
                            filtered.forEach(post => {
                                const card = `
                                    <div class="post-card">
                                        <h2><a href="${post.url || post.link}">${post.title}</a></h2>
                                        <p class="post-date">${post.date}</p>
                                        <p><strong>ã‚«ãƒ†ã‚´ãƒª:</strong> ${post.category}</p>
                                        <p><strong>ã‚¿ã‚°:</strong> ${post.tags ? post.tags.join(', ') : ''}</p>
                                    </div>`;
                                allPostsContainer.insertAdjacentHTML('beforeend', card);
                            });
                        }

                        function filterPosts() {
                            const selectedCategory = categoryFilter.value;
                            const selectedTag = tagFilter.value;
                            const filtered = posts.filter(post => {
                                const catMatch = selectedCategory === 'all' || post.category === selectedCategory;
                                const tagMatch = selectedTag === 'all' || (post.tags && post.tags.includes(selectedTag));
                                return catMatch && tagMatch;
                            });
                            displayPosts(filtered);
                        }

                        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
                        categoryFilter.addEventListener('change', filterPosts);
                        tagFilter.addEventListener('change', filterPosts);

                        // åˆæœŸè¡¨ç¤º
                        filterPosts();
                    }
                })
                .catch(error => {
                    console.error('è¨˜äº‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                    if (latestPostsContainer) latestPostsContainer.innerHTML = '<p>è¨˜äº‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>';
                    if (sidebarCategoriesContainer) sidebarCategoriesContainer.innerHTML = '<p>ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>';
                    if (allPostsContainer) allPostsContainer.innerHTML = '<p>è¨˜äº‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>';
                });

            // --- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤º (æ±ç”¨ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³) ---
            const sections = document.querySelectorAll('.section');
            const sectionObserver = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.2
            });
            sections.forEach(section => sectionObserver.observe(section));

            // --- about-emily.html ã®å‹•çš„èª­ã¿è¾¼ã¿å‡¦ç† ---
            const contentArea = document.getElementById('main-content-area');

            function loadAboutEmilyContent() {
                fetch('about-emily.html')
                    .then(res => {
                        if (!res.ok) {
                            throw new Error(`HTMLã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: ${res.status} ${res.statusText}`);
                        }
                        return res.text();
                    })
                    .then(html => {
                        if (contentArea) {
                            contentArea.innerHTML = html;
                        }
                    })
                    .catch(err => {
                        console.error('about-emily.htmlã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', err);
                        if (contentArea) {
                            contentArea.innerHTML = '<p>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>';
                        }
                    });
            }

            const aboutLink = document.querySelector('.about-emily-links a[href="about-emily.html"]');
            if (aboutLink) {
                aboutLink.addEventListener('click', (event) => {
                    event.preventDefault();
                    loadAboutEmilyContent();
                    history.pushState(null, '', 'about-emily.html');
                });
            }

            // --- AdSense Scriptã‚’è¿½åŠ  ---
            (function() {
                var script = document.createElement("script");
                script.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2597955691662954";
                script.setAttribute("async", "true");
                script.setAttribute("crossorigin", "anonymous");
                document.head.appendChild(script);
            })();
        });
    </script>
</body>

</html>