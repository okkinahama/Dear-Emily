
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="Z7oeRWlGR5pHAdAnMnSGpV6a00v7iDyDe9WCVB2ALh0" />
    <title>Dear Emily</title>

    <link rel="stylesheet" href="css/style.css"> 
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2597955691662954"
        crossorigin="anonymous"></script>
</head>
<body>
    <div class="scrollable-menu">
        <div class="scrollable-content">
            <ul>
                <li><a href="index.html">HOME</a></li>
                <li><a href="archive.html">Archive</a></li>
                <li><a href="articles.html">Article-List</a></li>
                <li><a href="about-emily.html">About</a></li>
                <li><a href="contact.html">Contact US</a></li>
            </ul>
        </div>
    </div>
    
    <header>
        <div class="container">
            <div class="hamburger-container">
                <div class="hamburger-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            
            <div class="header-content">
                <h1><a href="index.html">Dear Emily</a></h1>
                <p class="site-description">宇宙をテーマにしたブログ</p>
            </div>

            <nav class="nav-links">
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="archive.html">Archive</a></li>
                    <li><a href="articles.html">Article-List</a></li>
                    <li><a href="about-emily.html">About</a></li>
                    <li><a href="contact.html">Contact US</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <main>
        <section id="apod-hero">
            <div id="apod-container-hero">
                <h2 id="apod-title-hero"></h2> 
                <div id="apod-media-container-hero">
                    <img id="apod-image-hero" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="今日の宇宙画像">
                </div>
                <p id="apod-explanation-hero"></p>
                <p id="apod-copyright-hero"></p>
            </div>
        </section>
    
        <section class="hero">
            <div class="hero-image"></div>
            <div class="hero-text">
                <h2>Exploring the Mysteries of the Vast Universe</h2>
                <p>最新の宇宙に関するあらゆる情報を発信しています。</p>

                <div class="space-news-section">
                    <h3>🌌 Breaking News from the Cosmos（NASAより）</h3>
                    <div id="space-news"></div>
                </div>
            </div>
        </section>
    
        <div class="parallax-space"></div>
    
        <section class="articles"> <h2>最新の記事</h2> <ul class="article-links">
                <li><a href="articles.html">Go to Article List</a></li>
            </ul>
        
            <div class="article-list">
                <article class="article-card">
                    <h3><a href="articles/space-boder.html">宇宙ってどこから？</a></h3>
                    <p>「地球を飛び出したら、すぐ宇宙？」そんな疑問にやさしく答える、宇宙のはじまりのお話。</p>
                    <p class="article-date">投稿日：2025年4月21日</p>
                </article>
            
                <article class="article-card">
                    <h3><a href="articles/space-moon.html">お月さまって、毎晩どうして形がちがうの？</a></h3>
                    <p>セーラームーンを想いながら、月の満ち欠けについてやさしく解説する物語。</p>
                    <p class="article-date">投稿日：2025年4月22日</p>
                </article>
            
                <article class="article-card">
                    <h3><a href="articles/2025-04-24.space.openpage.html">きらめきの入口</a></h3>
                    <p>宇宙に関心をもつきっかけになってほしい</p>
                    <p class="article-date">投稿日：2025年4月24日</p>
                </article>

                <article class="article-card">
                    <h3><a href="articles/2025-04-25.space.mars.html">火星ってどんな星？</a></h3>
                    <p>セーラー・マーズに教えてもらう火星のひみつ</p>
                    <p class="article-date">投稿日：2025年4月25日</p>
                </article>

                <article class="article-card">
                    <h3><a href="articles/2025-04-26.space.jupiter.html">ジュピターって、どんな星？</a></h3>
                    <p>ジュピターのひみつと宇宙の嵐</p>
                    <p class="article-date">投稿日：2025年4月26日</p>
                </article>
            </div>
        </section>

        <aside id="sidebar">
            <h2>カテゴリーで探す</h2>
        </aside>

        <section class="latest-posts">
            <h2>最新記事</h2>
            <div id="latest-posts"></div>
        </section>

        <section class="section about-emily">
            <div class="about-content">
                <img src="images/Gemini_Generated_Image_749bad749bad749b.jpg" alt="Emilyのプロフィール画像" class="profile-image">
                <div class="about-text">
                    <h2>About Emily</h2>
                    <p>
                        ねぇエミリー。<br><br>
                        「なんでこんなに宇宙を扱った作品が多いの？」って、<br>
                        あなたがポツリとこぼしたあの一言、ずっと心に残ってたんだ。<br><br>
                        それに答えたくて、このブログを作ったよ。<br>
                        宇宙は、目に見えないけど、心を動かす魔法みたいな場所。<br>
                        たとえ遠くても、私たちに届く物語がそこにはあるんだ。<br><br>
                        だから一緒に、この広い宇宙をちょっとずつ旅していこう。
                    </p>
                    <p class="from-author">
                        宇宙の魅力、これから一緒に探していこうね。<br>
                        — okkinahanaより ✦
                    </p>
                </div>
            </div>
        </section>

        <section class="space-weather-container">
            <div class="space-weather-item">
                <h2>Today's Solar Flare Information</h2>
                <div id="solar-flare-container">
                    <p>太陽フレア情報を取得中です...</p>
                </div>
            </div>
            <div class="space-weather-item">
                <h2>Today's Geomagnetic Storm Information</h2>
                <div id="geomagnetic-storm-container">
                    <p>地磁気嵐情報を取得中です...</p>
                </div>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <p>&copy; 2025 Dear Emily</p>
            <nav>
                <ul>
                    <li><a href="privacy.html">プライバシーポリシー</a></li>
                    <li><a href="telms.html">利用規約</a></li>
                    <li><a href="sitemap.html">サイトマップ</a></li>
                </ul>
            </nav>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ハンバーガーメニューの処理
            const hamburgerMenu = document.querySelector('.hamburger-menu');
            const scrollableMenu = document.querySelector('.scrollable-menu');

            if (hamburgerMenu && scrollableMenu) {
                hamburgerMenu.addEventListener('click', function() {
                    scrollableMenu.classList.toggle('open');
                    hamburgerMenu.classList.toggle('open');
                });
            }

            // APIキーは本番環境ではサーバーサイドの環境変数に設定することを強く推奨します
            // ここに実際のNASA APIキーを入力してください
            const NASA_API_KEY = 'YOUR_NASA_API_KEY'; 

            // APOD (今日の宇宙画像) の取得と表示
            const apodContainerHero = document.getElementById('apod-container-hero');
            const apodTitleHero = document.getElementById('apod-title-hero');
            const apodMediaContainerHero = document.getElementById('apod-media-container-hero');
            const apodExplanationHero = document.getElementById('apod-explanation-hero');
            const apodCopyrightHero = document.getElementById('apod-copyright-hero');
            const apodApiUrl = `https://api.nasa.gov/planetary/apod?api_key=${NASA_API_KEY}`;

            fetch(apodApiUrl)
                .then(response => response.ok ? response.json() : Promise.reject(`HTTP error! status: ${response.status}`))
                .then(data => {
                    if (apodTitleHero) apodTitleHero.textContent = data.title;
                    if (apodExplanationHero) apodExplanationHero.textContent = data.explanation;
                    if (apodCopyrightHero) apodCopyrightHero.textContent = data.copyright ? `© ${data.copyright}` : '出典: NASA / パブリックドメインの可能性';
                    if (apodMediaContainerHero) {
                        apodMediaContainerHero.innerHTML = '';
                        if (data.media_type === 'video') {
                            const iframe = document.createElement('iframe');
                            iframe.src = data.url;
                            iframe.width = '100%';
                            iframe.style.aspectRatio = '16 / 9';
                            iframe.frameBorder = '0';
                            iframe.allowFullscreen = true;
                            apodMediaContainerHero.appendChild(iframe);
                        } else if (data.media_type === 'image') {
                            const img = document.createElement('img');
                            img.src = data.url;
                            img.alt = data.title;
                            img.style.maxWidth = '100%';
                            img.style.height = 'auto';
                            img.appendChild(img); // ここを修正: img要素自体をappendChildする
                            // 元のコード: apodMediaContainerHero.appendChild(img); で正しかったですが、重複してappendするとエラーになります。
                            // img.appendChild(img); は間違いです。
                            apodMediaContainerHero.appendChild(img); // 正しい書き方
                        }
                    }
                })
                .catch(error => {
                    console.error('APODの取得エラー:', error);
                    if (apodContainerHero) apodContainerHero.innerHTML = '<p>今日の宇宙画像を取得できませんでした。</p>';
                    if (apodTitleHero) apodTitleHero.textContent = '今日の宇宙画像を取得できませんでした';
                });

            // 太陽フレア情報の取得と表示
            const solarFlareContainer = document.getElementById('solar-flare-container');
            const todayDonki = new Date().toISOString().slice(0, 10);
            const solarFlareApiUrl = `https://api.nasa.gov/DONKI/FLR?startDate=${todayDonki}&endDate=${todayDonki}&api_key=${NASA_API_KEY}`;

            fetch(solarFlareApiUrl)
                .then(response => response.ok ? response.json() : Promise.reject(`DONKI API error! status: ${response.status}`))
                .then(data => {
                    if (solarFlareContainer) {
                        if (data && data.length > 0) {
                            let html = '<ul>';
                            data.forEach(flare => {
                                html += `<li>
                                    <strong>開始日時:</strong> ${flare.beginTime}<br>
                                    <strong>ピーク日時:</strong> ${flare.peakTime}<br>
                                    <strong>終了日時:</strong> ${flare.endTime || 'N/A'}<br>
                                    <strong>強度:</strong> ${flare.classType || 'N/A'}<br>
                                    <strong>領域:</strong> ${flare.sourceLocation || 'N/A'}
                                </li>`;
                            });
                            html += '</ul>';
                            solarFlareContainer.innerHTML = html;
                        } else {
                            solarFlareContainer.innerHTML = '<p>現在のところ、太陽フレアの活動は観測されていません。</p>';
                        }
                    }
                })
                .catch(error => {
                    console.error('太陽フレア情報の取得エラー:', error);
                    if (solarFlareContainer) solarFlareContainer.innerHTML = '<p>太陽フレア情報を取得できませんでした。</p>';
                });

            // 地磁気嵐情報の取得と表示
            const geomagneticStormContainer = document.getElementById('geomagnetic-storm-container');
            const geomagneticStormApiUrl = `https://api.nasa.gov/DONKI/GST?startDate=${todayDonki}&endDate=${todayDonki}&api_key=${NASA_API_KEY}`;

            fetch(geomagneticStormApiUrl)
                .then(response => response.ok ? response.json() : Promise.reject(`DONKI API error! status: ${response.status}`))
                .then(data => {
                    if (geomagneticStormContainer) {
                        if (data && data.length > 0) {
                            let html = '<ul>';
                            data.forEach(storm => {
                                html += `<li>
                                    <strong>開始日時:</strong> ${storm.beginTime}<br>
                                    <strong>Kp指数:</strong> ${storm.kpIndex || 'N/A'}<br>
                                    <strong>強度:</strong> ${storm.gstID || 'N/A'}<br>
                                    <strong>ソース:</strong> ${storm.source || 'N/A'}</li>`;
                            });
                            html += '</ul>';
                            geomagneticStormContainer.innerHTML = html;
                        } else {
                            geomagneticStormContainer.innerHTML = '<p>現在のところ、地磁気嵐は観測されていません。</p>';
                        }
                    }
                })
                .catch(error => {
                    console.error('地磁気嵐情報の取得エラー:', error);
                    if (geomagneticStormContainer) geomagneticStormContainer.innerHTML = '<p>地磁気嵐情報を取得できませんでした。</p>';
                });
        });
    </script>
        
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const feedUrl = 'https://www.nasa.gov/rss/dyn/breaking_news.rss';
            // CORS回避のため、RSS to JSONプロキシサービスを利用します
            // 通常、この種のAPIキーはサーバーサイドで管理することが推奨されます
            const apiUrl = 'https://api.rss2json.com/v1/api.json?rss_url=' + encodeURIComponent(feedUrl);

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const newsContainer = document.getElementById("space-news");
                    if (data && data.items && data.items.length > 0) {
                        data.items.slice(0, 5).forEach(item => {
                            const div = document.createElement("div");
                            div.innerHTML = `<a href="${item.link}" target="_blank">${item.title}</a>`;
                            newsContainer.appendChild(div);
                        });
                    } else {
                        newsContainer.innerHTML = '<p>最新のニュースは現在ありません。</p>';
                    }
                })
                .catch(error => {
                    console.error("RSS取得エラー:", error);
                    document.getElementById("space-news").innerHTML = '<p>ニュースの読み込み中にエラーが発生しました。</p>';
                });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // "About Emily"セクションはHTMLに直接記述されているため、動的な読み込みは不要です。
            // もし外部ファイルから読み込むように変更したい場合は、以下のコメントアウトを解除し、HTMLの該当部分を削除してください。
            /*
            const aboutEmilySection = document.querySelector('.section.about-emily');
            if (aboutEmilySection) {
                fetch('about-emily.html')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('HTMLの読み込みに失敗しました');
                        }
                        return response.text();
                    })
                    .then(html => {
                        aboutEmilySection.innerHTML = html; 
                    })
                    .catch(error => {
                        console.error('About Emily セクションの読み込みエラー:', error);
                    });
            }
            */
        });
    </script>
        
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('posts.json')  // posts.json から記事を読み込む
              .then(response => response.json())  // JSONデータとして読み込む
              .then(data => {
                const container = document.getElementById("latest-posts");  // 最新記事を表示する場所
            
                // 記事を日付順に並べ替え（新しい順）
                data.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                // 最新5件を表示
                const latest = data.slice(0, 5);  // 最新5件を取り出す
            
                if (latest.length > 0) {
                    latest.forEach(post => {
                        const div = document.createElement('div');
                        div.innerHTML = `<a href="${post.url}">${post.title}</a> <span style="color: #ccc;">(${post.date})</span>`;
                        container.appendChild(div);  // 最新記事を表示
                    });
                } else {
                    container.innerHTML = '<p>まだ記事がありません。</p>';
                }
              })
              .catch(error => console.error("記事の読み込みエラー:", error));  // エラーハンドリング
        });
    </script>
        
    <script>
        const categories = ["space", "月の不思議", "アニメで学ぶ", "深宇宙", "星座"]; // カテゴリリストを拡張

        const sidebar = document.getElementById("sidebar");

        if (sidebar) { // sidebar要素が存在するか確認
            const ul = document.createElement("ul");
            ul.classList.add("category-list");

            categories.forEach(cat => {
                const li = document.createElement("li");
                li.textContent = cat;
                // カテゴリクリックで記事をフィルタリングする機能などをここに追加できます
                // 例: li.addEventListener('click', () => filterArticlesByCategory(cat));
                ul.appendChild(li);
            });

            sidebar.appendChild(ul);
        }
    </script>

</body>
</html>